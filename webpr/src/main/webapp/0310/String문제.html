<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/mystyle.css">
<script type="text/javascript">
proc1 = () => {
	// 입력
	input = prompt("주민등록번호를 입력");
	// 각자리별로 추출하기
	yy = input.substr(0,2);
	mm = input.substr(2,2); // substring(2,4)
	dd = input.substr(4,2); // substring(4,6)
	ygend = input.substr(7,1) // substring(7,8)
	// 비교 - 성별
	if(ygend == "1" || ygend == "3" ) gender = "남자";
	else gender = "여자";
	// 비교 - 출생년도
	/* if(ygend == "1" || ygend == "2") byy = parseInt(yy)+1900; 
	else byy = parseInt(yy)+2000; 
	// 생년월일
	bir = byy + "년 " + mm + "월 " + dd+ "일"; */
	if(ygend == "1" || ygend == "2") byy = 19; 
	else byy = 20;
	// 생년월일
	bir = (byy+yy) + "년 " + mm + "월 " + dd  + "일"; 
	// byy, yy 둘다 문자열이므로 +면 문자열 결합으로 연결 
	
	
	// 나이
	age = new Date().getFullYear() - parseInt(byy+yy);
		
	// 출력
	str = input.slice(0,8) + "****** <br>";
	str += "생년월일 : " + bir +"<br>";
	str += "나이 : " + age +"<br>";
	str += "성별 : " + gender;
	document.getElementById('result1').innerHTML = str; 
}

proc2= () => {
	input = prompt("주민등록번호를 입력");
	code = input.replace("-", "");
	multi = "234567892345";
	sum = 0;
	//A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.
	for(i=0; i<multi.length;i++){
		sum += multi.substr(i,1)*code.substr(i,1);
	}
	//1번의 합을 11로 나눈 나머지를 구한다.
	na = sum % 11;
	//11에서 2번의 결과를 뺀다.
	res = 11 - na;
	//3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환
	res = res%10;
	//4번의 결과와 M자리의 값이 같으면 맞는 번호이다.
	if(code.substr(code.length-1,1) == res){flag = "올바른 번호"}
	else {flag = "틀린 번호"};
	
	// 출력 
	str = "주민번호 : "+input.slice(0,8) + "****** <br>";
	str += flag + "<br>";
	
	document.getElementById('result2').innerHTML = str;
	
}
</script>
</head>
<body>


  <div class="box">
    <p>prompt로 주민등록번호를 입력 받아 생년월일과 성별, 나이를 출력하는 프로그램
    </p>
    <br> <br>
    <input type="button" value="확인" onclick="proc1()">
    <br> <br>
    <div class="result" id="result1"></div>
  </div>
  
   <div class="box">
    <p>주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램<br>
    1. A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.<br>
    2. 1번의 합을 11로 나눈 나머지를 구한다.<br>
    3. 11에서 2번의 결과를 뺀다.<br>
    4. 3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환<br>
    5. 4번의 결과와 M자리의 값이 같으면 맞는 번호이다.<br>
    </p>
    <br> <br>
    <input type="button" value="확인" onclick="proc2()">
    <br> <br>
    <div class="result" id="result2"></div>
  </div>
</body>
</html>